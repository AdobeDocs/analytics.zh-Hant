---
title: 分類集規則
description: 瞭解如何使用分類集規則來定義分類資料的規則。
feature: Classifications
hide: true
hidefromtoc: true
source-git-commit: bccb3409875336a092ab641ad69b866b43621984
workflow-type: tm+mt
source-wordcount: '1530'
ht-degree: 11%

---


# 分類集規則

如果您的關鍵維度不斷變更，可使用規則支援自動分類。 透過上傳或自動化來更新分類會變成繁瑣的程式，或落後於新維度值的正確分類。 例如內部行銷活動、追蹤代碼或產品SKU。 維度必須包含可讓您套用一或多個規則的值，以便您可以從值衍生分類資料。

您可以在分類集內容中定義規則，這表示規則會套用（啟動時）至訂閱分類集的所有報表套裝和索引鍵維度組合。 此實作與舊版分類規則產生器的運作方式有些不同。 在分類規則產生器中，您需個別定義一或多個規則做為規則集的一部分，然後將規則集與一或多個報表套裝建立關聯。 在新介面中，分類設定內的規則也稱為規則集，但在您設定其他分類設定屬性的相同介面中定義。


若要定義分類集的規則集，請執行下列動作：

1. 從Adobe Analytics頂端功能表列選取&#x200B;**[!UICONTROL 元件]**，然後選取&#x200B;**[!UICONTROL 分類設定]**。
1. 在&#x200B;**[!UICONTROL 分類設定]**&#x200B;中，選取&#x200B;**[!UICONTROL 分類設定]**&#x200B;索引標籤。
1. 在&#x200B;**[!UICONTROL 分類集]**&#x200B;管理員中，選取您要定義規則的分類集。
1. 在&#x200B;**[!UICONTROL 分類設定： _分類設定名稱_]**對話方塊中，選取&#x200B;**[!UICONTROL 規則]**索引標籤。

   * 如果您是第一次存取「分類設定」的&#x200B;**[!UICONTROL 規則]**&#x200B;介面，或您目前決定繼續使用舊版規則產生器介面，系統會顯示一個對話方塊，讓您選取如何開始使用。 選項包括：

      * **移轉現有規則**。 匯入您目前的分類規則，並在新介面中繼續使用這些規則。 您的現有規則將會保留並轉換為新格式。
         * 選取&#x200B;**[!UICONTROL 移轉規則]**&#x200B;以繼續。
         * 在&#x200B;**[!UICONTROL 確認移轉]**&#x200B;對話方塊中，閱讀移轉的影響。
            * 選取&#x200B;**[!UICONTROL 移轉規則]**&#x200B;以確認移轉。 移轉完成後，請使用[規則集介面](#rule-set-interface)建立新規則，並編輯您現有的移轉規則。
            * 選取&#x200B;**[!UICONTROL 取消]**&#x200B;以取消移轉

      * **重新開始**。 使用新的規則產生器，從頭開始建立新的分類規則。 如果您想要重新設計分類邏輯或想要以新的分類規則重新開始，請選取此選項。
         * 選取&#x200B;**[!UICONTROL 建立新規則]**&#x200B;以繼續。
         * 在&#x200B;**[!UICONTROL 確認重新開始]**&#x200B;對話方塊中，閱讀重新開始的影響。
            * 選取&#x200B;**[!UICONTROL 重新開始]**&#x200B;以確認重新開始並捨棄任何現有規則。 使用[規則集介面](#rule-set-interface)來建立新規則。
            * 選取「**[!UICONTROL 取消]**」即可取消。


      * **使用舊版介面**。 繼續使用先前的規則產生器介面。 您隨時可以遷移至新體驗。
         * 選取&#x200B;**[!UICONTROL 前往舊版介面]**&#x200B;以繼續。 系統會將您導向舊版&#x200B;**[!UICONTROL 分類規則產生器]**&#x200B;介面。

   * 如果您已經移轉規則或為分類集建立新規則，您最終會直接在規則集介面中。



## 規則集介面

當您建立或編輯規則時，請使用規則集介面。

![規則集介面](assets/rulesets-ui.png)

| | 名稱 | 說明 |
|---|---|---|
| 1 | **[!UICONTROL 函數]** | 您可使用&#x200B;**[!UICONTROL 函式]**&#x200B;區域選取函式，並將函式拖放到規則集產生器。 |
| 2 | **規則集產生器** | 您可使用一或多個規則來建置規則集。 規則是函式的實作，且一律僅與一個函式相關聯。 一個函式可以有多個運運算元。 將函式拖放至規則集產生器，即可建立規則。 函式型別會定義規則的介面。 <br/>如需詳細資訊，請參閱[規則介面](#rule-interface)。<br/>您可以在任何位置插入函式，這些函式會依序執行，以決定分類的最終值。<br/>使用&#x200B;**[!UICONTROL 全部收合]**&#x200B;來收合所有規則，並使用&#x200B;**[!UICONTROL 全部展開]**&#x200B;來展開所有規則。 |
| 3 | **[!UICONTROL 狀態]** | 顯示規則集的狀態和上次修改日期。 <br/>選取&#x200B;**[!UICONTROL 啟動]**&#x200B;以啟動規則集。 <br/>選取&#x200B;**[!UICONTROL 停用]**&#x200B;以停用規則集。 |
| 4 | **[!UICONTROL 回顧]** | 指定規則集的回顧視窗。<br/>從下拉式功能表中選取選項（1個月到6個月）。<br/>選取&#x200B;**[!UICONTROL 執行回顧]**&#x200B;以使用選取的回顧期間執行回顧。 |
| 5 | **[!UICONTROL 測試選項]** | 使用範例索引鍵維度值來測試分類： <ul><li>在&#x200B;**[!UICONTROL 範例索引鍵]**&#x200B;文字區域中新增或貼上值。<br/>檢查&#x200B;**[!UICONTROL 記住範例金鑰]**&#x200B;以確保範例金鑰在規則集介面的不同使用方式中持續存在。</li><li>選取&#x200B;**[!UICONTROL 測試規則集]**&#x200B;以測試您的規則集。</li></ul> |


## 規則介面

您可以在「規則」介面的規則集中定義每個個別規則。 介面由下列元素組成：

![規則介面](assets/rule-ui.png)

| | 說明 |
|---|---|
| 1 | 所選函式的名稱以及為函式輸入的輸入。 |
| 2 | 所選函式的輸入。 輸入取決於選取的函式。 例如，對於Regular Expression函式，輸入是規則運算式，對於Split函式，輸入是權杖。 為特定函式輸入適當的輸入。 例如，`^(.+)\:(.+)\:(.+)$`代表在內部行銷活動代碼中識別三個分類的規則運算式。 |
| 3 | 每個作業都會將特定分類設定為值。 <br/>從&#x200B;**[!UICONTROL 設定分類]**&#x200B;下拉式功能表中選取分類，並輸入&#x200B;**[!UICONTROL 至]**&#x200B;的值。 <br/>使用![CrossSize400](/help/assets/icons/CrossSize400.svg)從清單中刪除操作。 |
| 4 | 選取![新增](/help/assets/icons/Add.svg) **[!UICONTROL 新增作業]**&#x200B;以新增其他作業至函式。 |
| 5 | 選取![V形向下](/help/assets/icons2/ChevronDown.svg)以摺疊規則。 選取![左側V形](/help/assets/icons/ChevronLeft.svg)以展開規則。<br/>選取![CrossSize400](/help/assets/icons/CrossSize400.svg)以刪除規則。 |

## 函數引用

對於每個支援的函式，請尋找以下有關所需輸入和範例使用案例的詳細資訊。


### 開頭為……

根據關鍵維度開頭的特定值設定分類。

+++ 詳細內容 

#### 必要輸入

輸入&#x200B;**[!UICONTROL 開頭為]**&#x200B;的值。 例如：`em`。

#### 使用案例

您想要定義一個規則，當索引鍵維度「內部行銷活動」的值以`Email`開頭時（例如： **[!UICONTROL ），自動將]**&#x200B;指派為`em`Channel`em:FY2025:Summer Sale`分類的值。

![規則 — 開頭為](assets/rule-startswith.png)

+++



### 結尾為……

根據索引鍵維度結尾的特定值設定分類。

+++ 詳細內容 

#### 必要輸入

輸入&#x200B;**[!UICONTROL 結尾為]**&#x200B;的值。 例如：`Sale`。

#### 使用案例

當索引鍵維度「內部行銷活動」的值包含`Sale`時（例如： **[!UICONTROL ），您要定義規則以自動將]**&#x200B;指派為`Sale`Type`em:FY2025:Summer Sale`分類的值。

![規則 — 結尾為](assets/rule-endswith.png)

+++


### 包含……

根據索引鍵維度包含的特定值設定分類。

+++ 詳細內容 

#### 必要輸入

輸入&#x200B;**[!UICONTROL Contains]**&#x200B;的值。 例如：`2025`。

#### 使用案例

您想要定義一個規則，當索引鍵維度「內部行銷活動」的值以`2025`結束時（例如： **[!UICONTROL ），自動將]**&#x200B;指派為`2025`Year`em:FY2025:Summer Sale`分類的值。

![規則 — Contains](assets/rule-contains.png)

+++


### 符合

根據索引鍵維度相符的特定值設定分類。

+++ 詳細內容 

#### 必要輸入

輸入&#x200B;**[!UICONTROL Match]**&#x200B;的值。 例如：`em:FY2025:Summer`。

#### 使用案例

您想要定義一個規則，當索引鍵維度「內部行銷活動」的值符合`2025 Summer Email`時，自動將&#x200B;**[!UICONTROL 指派為]** Type`em:FY2025:Summer`分類的值。

![規則 — 符合](assets/rule-match.png)

+++


### 規則運算式

根據套用至索引鍵維度值的規則運算式設定一或多個分類。

+++ 詳細內容 

#### 必要輸入

輸入&#x200B;**[!UICONTROL 規則運算式]**&#x200B;的值。 例如：`^(.+)\:(.+)\:(.+)$`。

#### 使用案例

您想要定義規則，以套用規則運算式&#x200B;**[!UICONTROL 並將比對群組（]**、**[!UICONTROL 和]**）套用至關鍵維度Internal Campaign的值，自動指派值給&#x200B;**[!UICONTROL Channel]**、`^(.+)\:(.+)\:(.+)$`Type`$1`和`$2`Year`$3`分類。

![規則 — 規則運算式](assets/rule-regex.png)


#### 參考表格 {#section_0211DCB1760042099CCD3ED7A665D716}

| 規則運算式 | 說明 |
|---|---|
| `(?ms)` | 讓整個規則運算式符合多行輸入，允許。 萬用字元以符合任何新行字元 |
| `(?i)` | 讓整個規則運算式不區分大小寫 |
| `[abc]` | a、b 或 c 其中一個字元 |
| `[^abc]` | 除了下列之外的任何單一字元：a、b 或 c |
| `[a-z]` | a-z 範圍內的任何單一字元 |
| `[a-zA-Z]` | a-z 或 A-Z 範圍內的任何單一字元 |
| `^` | 行的開始 (匹配行的開始) |
| `$` | 匹配行的結尾 (或結尾處的新行之前) |
| `\A` | 字串的開始 |
| `\z` | 字串的結尾 |
| `.` | 匹配任何字元 (新行除外) |
| `\s` | 任何空白字元 |
| `\S` | 任何非空白字元 |
| `\d` | 任何數字 |
| `\D` | 任何非數字 |
| `\w` | 任何單詞字元 (字母、數字、底線) |
| `\W` | 任何非單詞字元 |
| `\b` | 任何單詞邊界 |
| `(...)` | 擷取括住的所有內容 |
| `(a\b)` | a 或 b |
| `a?` | 零個或一個 a |
| `a*` | 零個或更多 a |
| `a+` | 一或多個 a |
| `a{3}` | 剛好 3 個 a |
| `a{3,}` | 3 個或更多 a |
| `a{3,6}` | 介於 3 到 6 個 a |

+++


## 規則優先順序

如果一個索引鍵維度值符合多個規則，且規則集包含具有相同「設定分類」操作的規則，則最後一個規則會決定分類的值。 因此，您應該將最重要的「設定分類」作業排入規則集內最後一個規則的一部分。

如果您建立多個規則，而這些規則並不共用相同的「設定分類」作業，處理順序並不重要。


### 範例

您要使用分類&#x200B;**[!UICONTROL 輸入]**&#x200B;來分類，使用者如何使用搜尋字串作為關鍵維度來搜尋運動員。 例如，使用此規則集：

![規則優先順序](assets/rule-priority.png)

* 當使用者搜尋`Cowboys Fantasy Tony Romo`時，`Romo`被分類為&#x200B;**[!UICONTROL 型別]**。
* 當使用者搜尋`Cowboys Fantasy Tony Romeo`時，`Fantasy`被分類為&#x200B;**[!UICONTROL 型別]**。
* 當使用者搜尋`Cowboys vs. Broncos`時，`Team`被分類為&#x200B;**[!UICONTROL 型別]**。

